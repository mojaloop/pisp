<svg xmlns="http://www.w3.org/2000/svg" height="2216" preserveAspectRatio="none" style="width:2907px;height:2216px" width="2907">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="327" x="1290.25" y="28.708">
    PISP Linking: Request consent (Web)
  </text>
  <path fill="#DDD" stroke="#a80036" d="M630.5 40.953h73v2169.945h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="633.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v246.992H24z"/>
  <path stroke="#a80036" d="M24 228.383v246.992M34 228.383v246.992M24 475.375h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1311.617h10v97.398H24zM662 446.242h10v384.523h-10zM662 1056.625h10v284.125h-10zM1300 701.234h10v384.523h-10zM1356.5 1409.016h10v697.586h-10zM1895.5 1409.016h10v706.586h-10z"/>
  <path stroke="#a80036" d="M29 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 133.25v28"/>
  <path stroke="#a80036" d="M29 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 200.383v28"/>
  <path stroke="#a80036" d="M29 228.383v1896.219M666.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M666.5 133.25v28"/>
  <path stroke="#a80036" d="M666.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M666.5 200.383v28"/>
  <path stroke="#a80036" d="M666.5 228.383v1896.219M1304.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1304.5 133.25v28"/>
  <path stroke="#a80036" d="M1304.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1304.5 200.383v28"/>
  <path stroke="#a80036" d="M1304.5 228.383v1896.219M1361.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1361.5 133.25v28"/>
  <path stroke="#a80036" d="M1361.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1361.5 200.383v28"/>
  <path stroke="#a80036" d="M1361.5 228.383v1896.219M1900.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1900.5 133.25v28"/>
  <path stroke="#a80036" d="M1900.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1900.5 200.383v28"/>
  <path stroke="#a80036" d="M1900.5 228.383v1896.219M2515 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2515 133.25v28"/>
  <path stroke="#a80036" d="M2515 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2515 200.383v28"/>
  <path stroke="#a80036" d="M2515 228.383v1896.219"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 87.953h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="107.948">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 2123.602h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="2143.597">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M635.5 87.953h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="642.5" y="107.948">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M635.5 2123.602h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="642.5" y="2143.597">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1277.5 87.953h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1284.5" y="107.948">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1277.5 2123.602h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1284.5" y="2143.597">
    DFSP
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1342.5" y="119.948">
    User
  </text>
  <circle cx="1361.5" cy="49.953" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1361.5 57.953v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1342.5" y="2136.597">
    User
  </text>
  <circle cx="1361.5" cy="2149.898" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1361.5 2157.898v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1847.5 87.953h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="1854.5" y="107.948">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1847.5 2123.602h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="1854.5" y="2143.597">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2423 87.953h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2430" y="107.948">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2423 2123.602h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2430" y="2143.597">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v246.992H24z"/>
  <path stroke="#a80036" d="M24 228.383v246.992M34 228.383v246.992M24 475.375h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1311.617h10v97.398H24zM662 446.242h10v384.523h-10zM662 1056.625h10v284.125h-10zM1300 701.234h10v384.523h-10zM1356.5 1409.016h10v697.586h-10zM1895.5 1409.016h10v706.586h-10z"/>
  <path d="M5 166.25v25h1322v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1317 166.25v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="783" x="268.25" y="183.317">
    The user initiated some sort of account linking by choosing the appropriate DFSP from a screen inside the PISP application.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M650 442.242l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M34 446.242h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="342.813">
    REQ-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="89" y="244.45">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="113" y="259.582">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="274.715">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="105" y="289.848">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="304.981">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="113" y="320.114">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129" y="335.247">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="504" x="145" y="335.247">
    accountId: &quot;dfsp.username.1234&quot;, // This is *optional* for web.
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="350.379">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="129" y="365.512">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="380.645">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="113" y="395.778">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="113" y="410.911">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="113" y="426.043">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="401" y="426.043">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="441.176">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 471.375l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 475.375h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="46" y="470.309">
    REQ-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="94" y="470.309">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1288 697.234l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M672 701.234h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="679" y="597.805">
    REQ-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="727" y="499.442">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="751" y="514.575">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="751" y="529.707">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="743" y="544.84">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="751" y="559.973">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="751" y="575.106">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="767" y="590.239">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="783" y="605.372">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="767" y="620.504">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="783" y="635.637">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="751" y="650.77">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="751" y="665.903">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="751" y="681.036">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1039" y="681.036">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="735" y="696.168">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2503.5 726.367l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1310 730.367h1199.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1317" y="725.301">
    SIM-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1361" y="725.301">
    POST /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M2515.5 759.5h42M2557.5 759.5v13M2516.5 772.5h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2526.5 768.5l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2522.5" y="754.434">
    SIM-2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2566.5" y="754.434">
    store consentRequest details
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1321 797.633l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1315 801.633h1199.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1327" y="796.567">
    SIM-3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1371" y="796.567">
    201 Created
  </text>
  <path fill="#A80036" stroke="#a80036" d="M678 826.766l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M672 830.766h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="684" y="825.7">
    REQ-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="732" y="825.7">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M683 1052.625l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M677 1056.625h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="689" y="953.196">
    REQ-5
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="737" y="854.832">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="761" y="869.965">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="761" y="885.098">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="753" y="900.231">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="761" y="915.364">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="777" y="930.497">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="793" y="945.629">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="777" y="960.762">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="793" y="975.895">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="761" y="991.028">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="761" y="1006.161">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="761" y="1021.293">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1049" y="1021.293">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="761" y="1036.426">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="745" y="1051.559">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1293 1081.758l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M672 1085.758h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="679" y="1080.692">
    REQ-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="727" y="1080.692">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M45 1307.617l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M39 1311.617h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="51" y="1208.188">
    REQ-7
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="99" y="1109.825">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="123" y="1124.957">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1140.09">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="115" y="1155.223">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="123" y="1170.356">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1185.489">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1200.622">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1215.754">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1230.887">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="123" y="1246.02">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1261.153">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="123" y="1276.286">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="411" y="1276.286">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="123" y="1291.418">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="107" y="1306.551">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M655 1336.75l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 1340.75h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="1335.684">
    REQ-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="89" y="1335.684">
    200 OK
  </text>
  <path d="M5 1353.75v25h1322v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1317 1353.75v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="779" x="238.25" y="1370.817">
    At this point, the PISP knows that the Web authChannel is in use and the PISP App should redirect the user to the provided
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1021.25" y="1370.817">
    authUri
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1077.25" y="1370.817">
    .
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1883.5 1405.016l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M29 1409.016h1860.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="36" y="1403.95">
    SIM-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="80" y="1403.95">
    window.location &lt;- authUri ==&gt;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="352" x="336" y="1403.95">
    GET dfspa.com/authorize?consentRequestId=456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="688" y="1403.95">
    &amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2503.5 1434.148l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1905.5 1438.148h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1912.5" y="1433.082">
    SIM-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1956.5" y="1433.082">
    GET
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="513" x="1985.5" y="1433.082">
    /authorize?consentRequestId=456&amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1916.5 1463.281l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1910.5 1467.281h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1922.5" y="1462.215">
    SIM-6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1966.5" y="1462.215">
    200 OK: send
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="2055.5" y="1462.215">
    /authorize
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2133.5" y="1462.215">
    single page application (SPA)
  </text>
  <path stroke="#a80036" d="M1905.5 1496.414h42M1947.5 1496.414v13M1906.5 1509.414h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1916.5 1505.414l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1912.5" y="1491.348">
    SIM-7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1956.5" y="1491.348">
    RENDER:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="2016.5" y="1491.348">
    login form
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1883.5 1534.547l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1366.5 1538.547h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1373.5" y="1533.481">
    SIM-8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1417.5" y="1533.481">
    SUBMIT
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="1470.5" y="1533.481">
    username &amp; password
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2503.5 1624.21l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1905.5 1628.211h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1912.5" y="1592.879">
    SIM-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="1956.5" y="1562.614">
    POST /login
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1964.5" y="1577.747">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1980.5" y="1592.879">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1980.5" y="1608.012">
    password,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1964.5" y="1623.145">
    }
  </text>
  <path stroke="#a80036" d="M2515.5 1672.477h42M2557.5 1672.477v13M2516.5 1685.477h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2526.5 1681.477l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2522.5" y="1659.844">
    SIM-10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="2575.5" y="1652.278">
    verify User&apos;s credentials
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="2575.5" y="1667.411">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="2670.5" y="1667.411">
    TTK defined rule for username
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="2895.5" y="1667.411">
    &quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1916.5 1710.61l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1910.5 1714.609h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1922.5" y="1709.543">
    SIM-11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="1975.5" y="1709.543">
    201 OK: user authorized
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2503.5 1739.742l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1905.5 1743.742h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1912.5" y="1738.676">
    SIM-12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1965.5" y="1738.676">
    GET /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M2515.5 1772.875h42M2557.5 1772.875v13M2516.5 1785.875h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2526.5 1781.875l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2522.5" y="1767.809">
    SIM-13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="2575.5" y="1767.809">
    find consentRequest details for id=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1916.5 1811.008l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1910.5 1815.008h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1922.5" y="1809.942">
    SIM-14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="1975.5" y="1809.942">
    200 OK: consent requests details in response payload
  </text>
  <path stroke="#a80036" d="M1905.5 1859.273h42M1947.5 1859.273v13M1906.5 1872.273h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1916.5 1868.273l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1912.5" y="1846.641">
    SIM-15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="1965.5" y="1839.075">
    RENDER
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="2021.5" y="1839.075">
    ask the User to grant consent
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2246.5" y="1839.075">
    for
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="2267.5" y="1839.075">
    consentRequestId=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1883.5 1897.406l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1366.5 1901.406h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1373.5" y="1896.34">
    SIM-16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="1426.5" y="1896.34">
    SUBMIT:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1483.5" y="1896.34">
    consent granted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2503.5 1987.07l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1905.5 1991.07h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1912.5" y="1955.739">
    SIM-17
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1965.5" y="1925.473">
    POST /authorize
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1973.5" y="1940.606">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1989.5" y="1955.739">
    consentRequestId=456
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2149.5" y="1955.739">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1989.5" y="1970.872">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1973.5" y="1986.004">
    }
  </text>
  <path stroke="#a80036" d="M2515.5 2035.336h42M2557.5 2035.336v13M2516.5 2048.336h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2526.5 2044.336l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2522.5" y="2022.704">
    SIM-18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="2575.5" y="2015.137">
    generate a
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="2649.5" y="2015.137">
    secret=&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="2575.5" y="2030.27">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="2670.5" y="2030.27">
    TTK defined rule for username
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1916.5 2073.469l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1910.5 2077.469h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1922.5" y="2072.403">
    SIM-19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1975.5" y="2072.403">
    201 OK: response: {
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="2108.5" y="2072.403">
    secret:&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2264.5" y="2072.403">
    &quot; }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1372.5 2102.602l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1366.5 2106.602h528"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1378.5" y="2101.536">
    SIM-20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="1431.5" y="2101.536">
    redirects to callbackUri=&quot;pisp-app://callback...?
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="1730.5" y="2101.536">
    secret=some-secret
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1878.5" y="2101.536">
    &quot;
  </text>
</svg>
