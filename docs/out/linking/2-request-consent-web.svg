<svg xmlns="http://www.w3.org/2000/svg" height="2259" preserveAspectRatio="none" style="width:3203px;height:2259px" width="3203">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="327" x="1438" y="28.708">
    PISP Linking: Request consent (Web)
  </text>
  <path fill="#DDD" stroke="#a80036" d="M630.5 40.953h73v2212.078h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="633.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v246.992H24z"/>
  <path stroke="#a80036" d="M24 228.383v246.992M34 228.383v246.992M24 475.375h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1353.75h10v97.398H24zM662 446.242h10v426.656h-10zM662 1098.758h10v284.125h-10zM1300 701.234h10v426.656h-10zM1652 1451.148h10v697.586h-10zM2191 1451.148h10v706.586h-10z"/>
  <path stroke="#a80036" d="M29 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 133.25v28"/>
  <path stroke="#a80036" d="M29 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 200.383v28"/>
  <path stroke="#a80036" d="M29 228.383v1938.351M666.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M666.5 133.25v28"/>
  <path stroke="#a80036" d="M666.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M666.5 200.383v28"/>
  <path stroke="#a80036" d="M666.5 228.383v1938.351M1304.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1304.5 133.25v28"/>
  <path stroke="#a80036" d="M1304.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1304.5 200.383v28"/>
  <path stroke="#a80036" d="M1304.5 228.383v1938.351M1657 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1657 133.25v28"/>
  <path stroke="#a80036" d="M1657 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1657 200.383v28"/>
  <path stroke="#a80036" d="M1657 228.383v1938.351M2196 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2196 133.25v28"/>
  <path stroke="#a80036" d="M2196 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2196 200.383v28"/>
  <path stroke="#a80036" d="M2196 228.383v1938.351M2810.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2810.5 133.25v28"/>
  <path stroke="#a80036" d="M2810.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2810.5 200.383v28"/>
  <path stroke="#a80036" d="M2810.5 228.383v1938.351"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 87.953h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="107.948">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 2165.734h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="2185.729">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M635.5 87.953h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="642.5" y="107.948">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M635.5 2165.734h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="642.5" y="2185.729">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1277.5 87.953h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1284.5" y="107.948">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1277.5 2165.734h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1284.5" y="2185.729">
    DFSP
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1638" y="119.948">
    User
  </text>
  <circle cx="1657" cy="49.953" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1657 57.953v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1638" y="2178.729">
    User
  </text>
  <circle cx="1657" cy="2192.031" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1657 2200.031v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2143 87.953h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="2150" y="107.948">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2143 2165.734h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="2150" y="2185.729">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2718.5 87.953h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2725.5" y="107.948">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2718.5 2165.734h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2725.5" y="2185.729">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v246.992H24z"/>
  <path stroke="#a80036" d="M24 228.383v246.992M34 228.383v246.992M24 475.375h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1353.75h10v97.398H24zM662 446.242h10v426.656h-10zM662 1098.758h10v284.125h-10zM1300 701.234h10v426.656h-10zM1652 1451.148h10v697.586h-10zM2191 1451.148h10v706.586h-10z"/>
  <path d="M5 166.25v25h1322v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1317 166.25v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="783" x="268.25" y="183.317">
    The user initiated some sort of account linking by choosing the appropriate DFSP from a screen inside the PISP application.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M650 442.242l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M34 446.242h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="342.813">
    REQ-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="89" y="244.45">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="113" y="259.582">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="274.715">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="105" y="289.848">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="304.981">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="113" y="320.114">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129" y="335.247">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="504" x="145" y="335.247">
    accountId: &quot;dfsp.username.1234&quot;, // This is *optional* for web.
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="350.379">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="129" y="365.512">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="380.645">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="113" y="395.778">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="113" y="410.911">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="113" y="426.043">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="401" y="426.043">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="441.176">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 471.375l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 475.375h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="46" y="470.309">
    REQ-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="94" y="470.309">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1288 697.234l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M672 701.234h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="679" y="597.805">
    REQ-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="727" y="499.442">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="751" y="514.575">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="751" y="529.707">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="743" y="544.84">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="751" y="559.973">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="751" y="575.106">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="767" y="590.239">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="783" y="605.372">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="767" y="620.504">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="783" y="635.637">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="751" y="650.77">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="751" y="665.903">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="751" y="681.036">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1039" y="681.036">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="735" y="696.168">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M683 726.367l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M677 730.367h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="689" y="725.301">
    REQ-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="737" y="725.301">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M1310 759.5h42M1352 759.5v13M1311 772.5h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1321 768.5l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="1317" y="754.434">
    DFSP-1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="1374" y="754.434">
    Verify the consentRequests is valid or not?
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2799 797.633l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1310 801.633h1495"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1317" y="796.567">
    SIM-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1361" y="796.567">
    POST /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M2811 830.766h42M2853 830.766v13M2812 843.766h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2822 839.766l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2818" y="825.7">
    SIM-2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2862" y="825.7">
    store consentRequest details
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1321 868.898l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1315 872.898h1495"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1327" y="867.832">
    SIM-3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1371" y="867.832">
    201 Created
  </text>
  <path fill="#A80036" stroke="#a80036" d="M683 1094.758l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M677 1098.758h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="689" y="995.329">
    REQ-5
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="737" y="896.965">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="761" y="912.098">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="761" y="927.231">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="753" y="942.364">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="761" y="957.497">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="777" y="972.629">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="793" y="987.762">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="777" y="1002.895">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="793" y="1018.028">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="761" y="1033.161">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="761" y="1048.293">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="761" y="1063.426">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1049" y="1063.426">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="761" y="1078.559">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="745" y="1093.692">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1293 1123.89l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M672 1127.891h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="679" y="1122.825">
    REQ-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="727" y="1122.825">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M45 1349.75l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M39 1353.75h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="51" y="1250.321">
    REQ-7
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="99" y="1151.957">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="123" y="1167.09">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1182.223">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="115" y="1197.356">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="123" y="1212.489">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1227.622">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1242.754">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1257.887">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1273.02">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="123" y="1288.153">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1303.286">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="123" y="1318.418">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="411" y="1318.418">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="123" y="1333.551">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="107" y="1348.684">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M655 1378.883l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 1382.883h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="1377.817">
    REQ-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="89" y="1377.817">
    200 OK
  </text>
  <path d="M5 1395.883v25h1322v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1317 1395.883v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="779" x="238.25" y="1412.95">
    At this point, the PISP knows that the Web authChannel is in use and the PISP App should redirect the user to the provided
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1021.25" y="1412.95">
    authUri
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1077.25" y="1412.95">
    .
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2179 1447.148l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M29 1451.148h2156"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="36" y="1446.082">
    SIM-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="80" y="1446.082">
    window.location &lt;- authUri ==&gt;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="352" x="336" y="1446.082">
    GET dfspa.com/authorize?consentRequestId=456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="688" y="1446.082">
    &amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2799 1476.281l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2201 1480.281h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2208" y="1475.215">
    SIM-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="2252" y="1475.215">
    GET
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="513" x="2281" y="1475.215">
    /authorize?consentRequestId=456&amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2212 1505.414l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2206 1509.414h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2218" y="1504.348">
    SIM-6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="2262" y="1504.348">
    200 OK: send
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="2351" y="1504.348">
    /authorize
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2429" y="1504.348">
    single page application (SPA)
  </text>
  <path stroke="#a80036" d="M2201 1538.547h42M2243 1538.547v13M2202 1551.547h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2212 1547.547l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2208" y="1533.481">
    SIM-7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="2252" y="1533.481">
    RENDER:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="2312" y="1533.481">
    login form
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2179 1576.68l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1662 1580.68h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1669" y="1575.614">
    SIM-8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1713" y="1575.614">
    SUBMIT
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="1766" y="1575.614">
    username &amp; password
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2799 1666.344l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2201 1670.344h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2208" y="1635.012">
    SIM-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="2252" y="1604.747">
    POST /login
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2260" y="1619.879">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2276" y="1635.012">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2276" y="1650.145">
    password,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2260" y="1665.278">
    }
  </text>
  <path stroke="#a80036" d="M2811 1714.609h42M2853 1714.609v13M2812 1727.609h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2822 1723.61l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2818" y="1701.977">
    SIM-10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="2871" y="1694.411">
    verify User&apos;s credentials
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="2871" y="1709.543">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="2966" y="1709.543">
    TTK defined rule for username
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="3191" y="1709.543">
    &quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2212 1752.742l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2206 1756.742h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2218" y="1751.676">
    SIM-11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="2271" y="1751.676">
    201 OK: user authorized
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2799 1781.875l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2201 1785.875h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2208" y="1780.809">
    SIM-12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="2261" y="1780.809">
    GET /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M2811 1815.008h42M2853 1815.008v13M2812 1828.008h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2822 1824.008l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2818" y="1809.942">
    SIM-13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="2871" y="1809.942">
    find consentRequest details for id=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2212 1853.14l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2206 1857.141h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2218" y="1852.075">
    SIM-14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="2271" y="1852.075">
    200 OK: consent requests details in response payload
  </text>
  <path stroke="#a80036" d="M2201 1901.406h42M2243 1901.406v13M2202 1914.406h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2212 1910.406l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2208" y="1888.774">
    SIM-15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="2261" y="1881.207">
    RENDER
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="2317" y="1881.207">
    ask the User to grant consent
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2542" y="1881.207">
    for
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="2563" y="1881.207">
    consentRequestId=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2179 1939.54l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1662 1943.539h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1669" y="1938.473">
    SIM-16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="1722" y="1938.473">
    SUBMIT:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1779" y="1938.473">
    consent granted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2799 2029.203l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2201 2033.203h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2208" y="1997.872">
    SIM-17
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="2261" y="1967.606">
    POST /authorize
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2269" y="1982.739">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="2285" y="1997.872">
    consentRequestId=456
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2445" y="1997.872">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2285" y="2013.004">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2269" y="2028.137">
    }
  </text>
  <path stroke="#a80036" d="M2811 2077.469h42M2853 2077.469v13M2812 2090.469h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2822 2086.469l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2818" y="2064.836">
    SIM-18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="2871" y="2057.27">
    generate a
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="2945" y="2057.27">
    secret=&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="2871" y="2072.403">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="2966" y="2072.403">
    TTK defined rule for username
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2212 2115.602l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2206 2119.602h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2218" y="2114.536">
    SIM-19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="2271" y="2114.536">
    201 OK: response: {
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="2404" y="2114.536">
    secret:&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2560" y="2114.536">
    &quot; }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1668 2144.734l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1662 2148.734h528"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1674" y="2143.669">
    SIM-20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="1727" y="2143.669">
    redirects to callbackUri=&quot;pisp-app://callback...?
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="2026" y="2143.669">
    secret=some-secret
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="2174" y="2143.669">
    &quot;
  </text>
</svg>
