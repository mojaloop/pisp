<svg xmlns="http://www.w3.org/2000/svg" height="2232" preserveAspectRatio="none" style="width:3043px;height:2232px" width="3043">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="327" x="1358.25" y="28.708">
    PISP Linking: Request consent (Web)
  </text>
  <path fill="#DDD" stroke="#a80036" d="M766.5 40.953h73v2185.078h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="769.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v262.125H24z"/>
  <path stroke="#a80036" d="M24 228.383v262.125M34 228.383v262.125M24 490.508h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1326.75h10v97.398H24zM798 461.375h10v384.523h-10zM798 1071.758h10v284.125h-10zM1436 716.367h10v384.523h-10zM1492.5 1424.148h10v697.586h-10zM2031.5 1424.148h10v706.586h-10z"/>
  <path stroke="#a80036" d="M29 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 133.25v28"/>
  <path stroke="#a80036" d="M29 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 200.383v28"/>
  <path stroke="#a80036" d="M29 228.383v1911.351M802.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M802.5 133.25v28"/>
  <path stroke="#a80036" d="M802.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M802.5 200.383v28"/>
  <path stroke="#a80036" d="M802.5 228.383v1911.351M1440.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1440.5 133.25v28"/>
  <path stroke="#a80036" d="M1440.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1440.5 200.383v28"/>
  <path stroke="#a80036" d="M1440.5 228.383v1911.351M1497.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1497.5 133.25v28"/>
  <path stroke="#a80036" d="M1497.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1497.5 200.383v28"/>
  <path stroke="#a80036" d="M1497.5 228.383v1911.351M2036.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2036.5 133.25v28"/>
  <path stroke="#a80036" d="M2036.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2036.5 200.383v28"/>
  <path stroke="#a80036" d="M2036.5 228.383v1911.351M2651 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2651 133.25v28"/>
  <path stroke="#a80036" d="M2651 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2651 200.383v28"/>
  <path stroke="#a80036" d="M2651 228.383v1911.351"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 87.953h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="107.948">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 2138.734h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="2158.729">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M771.5 87.953h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="778.5" y="107.948">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M771.5 2138.734h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="778.5" y="2158.729">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1413.5 87.953h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1420.5" y="107.948">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1413.5 2138.734h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1420.5" y="2158.729">
    DFSP
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1478.5" y="119.948">
    User
  </text>
  <circle cx="1497.5" cy="49.953" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1497.5 57.953v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1478.5" y="2151.729">
    User
  </text>
  <circle cx="1497.5" cy="2165.031" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1497.5 2173.031v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1983.5 87.953h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="1990.5" y="107.948">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1983.5 2138.734h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="1990.5" y="2158.729">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2559 87.953h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2566" y="107.948">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2559 2138.734h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2566" y="2158.729">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v262.125H24z"/>
  <path stroke="#a80036" d="M24 228.383v262.125M34 228.383v262.125M24 490.508h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1326.75h10v97.398H24zM798 461.375h10v384.523h-10zM798 1071.758h10v284.125h-10zM1436 716.367h10v384.523h-10zM1492.5 1424.148h10v697.586h-10zM2031.5 1424.148h10v706.586h-10z"/>
  <path d="M5 166.25v25h1458v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1453 166.25v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="783" x="336.25" y="183.317">
    The user initiated some sort of account linking by choosing the appropriate DFSP from a screen inside the PISP application.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M786 457.375l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M34 461.375h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="350.379">
    REQ-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="89" y="244.45">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="113" y="259.582">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="274.715">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="105" y="289.848">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="304.981">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="672" x="113" y="320.114">
    userId: &quot;username1234&quot;, //so the dfsp can associate this request with GET /accounts/
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="113" y="335.247">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129" y="350.379">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="504" x="145" y="350.379">
    accountId: &quot;dfsp.username.1234&quot;, // This is *optional* for web.
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="365.512">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="129" y="380.645">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="395.778">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="113" y="410.911">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="113" y="426.043">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="113" y="441.176">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="401" y="441.176">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="456.309">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 486.508l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 490.508h763"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="46" y="485.442">
    REQ-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="94" y="485.442">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1424 712.367l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M808 716.367h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="815" y="612.938">
    REQ-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="863" y="514.575">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="887" y="529.707">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="887" y="544.84">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="879" y="559.973">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="887" y="575.106">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="887" y="590.239">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="903" y="605.372">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="919" y="620.504">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="903" y="635.637">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="919" y="650.77">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="887" y="665.903">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="887" y="681.036">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="887" y="696.168">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1175" y="696.168">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="871" y="711.301">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2639.5 741.5l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1446 745.5h1199.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1453" y="740.434">
    SIM-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1497" y="740.434">
    POST /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M2651.5 774.633h42M2693.5 774.633v13M2652.5 787.633h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2662.5 783.633l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2658.5" y="769.567">
    SIM-2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2702.5" y="769.567">
    store consentRequest details
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1457 812.766l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1451 816.766h1199.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1463" y="811.7">
    SIM-3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1507" y="811.7">
    201 Created
  </text>
  <path fill="#A80036" stroke="#a80036" d="M814 841.898l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M808 845.898h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="820" y="840.832">
    REQ-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="868" y="840.832">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M819 1067.758l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M813 1071.758h622"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="825" y="968.329">
    REQ-5
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="873" y="869.965">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="897" y="885.098">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="897" y="900.231">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="889" y="915.364">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="897" y="930.497">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="913" y="945.629">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="929" y="960.762">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="913" y="975.895">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="929" y="991.028">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="897" y="1006.161">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="897" y="1021.293">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="897" y="1036.426">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1185" y="1036.426">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="897" y="1051.559">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="881" y="1066.692">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1429 1096.89l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M808 1100.891h627"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="815" y="1095.825">
    REQ-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="863" y="1095.825">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M45 1322.75l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M39 1326.75h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="51" y="1223.321">
    REQ-7
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="99" y="1124.957">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="123" y="1140.09">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1155.223">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="115" y="1170.356">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="123" y="1185.489">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1200.622">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1215.754">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1230.887">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1246.02">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="123" y="1261.153">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1276.286">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="123" y="1291.418">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="411" y="1291.418">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="123" y="1306.551">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="107" y="1321.684">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M791 1351.883l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 1355.883h763"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="1350.817">
    REQ-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="89" y="1350.817">
    200 OK
  </text>
  <path d="M5 1368.883v25h1458v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1453 1368.883v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="779" x="306.25" y="1385.95">
    At this point, the PISP knows that the Web authChannel is in use and the PISP App should redirect the user to the provided
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1089.25" y="1385.95">
    authUri
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1145.25" y="1385.95">
    .
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2019.5 1420.148l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M29 1424.148h1996.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="36" y="1419.082">
    SIM-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="80" y="1419.082">
    window.location &lt;- authUri ==&gt;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="352" x="336" y="1419.082">
    GET dfspa.com/authorize?consentRequestId=456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="688" y="1419.082">
    &amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2639.5 1449.281l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2041.5 1453.281h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2048.5" y="1448.215">
    SIM-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="2092.5" y="1448.215">
    GET
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="513" x="2121.5" y="1448.215">
    /authorize?consentRequestId=456&amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2052.5 1478.414l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2046.5 1482.414h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2058.5" y="1477.348">
    SIM-6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="2102.5" y="1477.348">
    200 OK: send
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="2191.5" y="1477.348">
    /authorize
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2269.5" y="1477.348">
    single page application (SPA)
  </text>
  <path stroke="#a80036" d="M2041.5 1511.547h42M2083.5 1511.547v13M2042.5 1524.547h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2052.5 1520.547l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2048.5" y="1506.481">
    SIM-7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="2092.5" y="1506.481">
    RENDER:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="2152.5" y="1506.481">
    login form
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2019.5 1549.68l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1502.5 1553.68h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1509.5" y="1548.614">
    SIM-8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1553.5" y="1548.614">
    SUBMIT
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="1606.5" y="1548.614">
    username &amp; password
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2639.5 1639.344l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2041.5 1643.344h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2048.5" y="1608.012">
    SIM-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="2092.5" y="1577.747">
    POST /login
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2100.5" y="1592.879">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2116.5" y="1608.012">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2116.5" y="1623.145">
    password,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2100.5" y="1638.278">
    }
  </text>
  <path stroke="#a80036" d="M2651.5 1687.609h42M2693.5 1687.609v13M2652.5 1700.609h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2662.5 1696.61l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2658.5" y="1674.977">
    SIM-10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="2711.5" y="1667.411">
    verify User&apos;s credentials
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="2711.5" y="1682.543">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="2806.5" y="1682.543">
    TTK defined rule for username
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="3031.5" y="1682.543">
    &quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2052.5 1725.742l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2046.5 1729.742h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2058.5" y="1724.676">
    SIM-11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="2111.5" y="1724.676">
    201 OK: user authorized
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2639.5 1754.875l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2041.5 1758.875h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2048.5" y="1753.809">
    SIM-12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="2101.5" y="1753.809">
    GET /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M2651.5 1788.008h42M2693.5 1788.008v13M2652.5 1801.008h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2662.5 1797.008l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2658.5" y="1782.942">
    SIM-13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="2711.5" y="1782.942">
    find consentRequest details for id=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2052.5 1826.14l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2046.5 1830.141h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2058.5" y="1825.075">
    SIM-14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="2111.5" y="1825.075">
    200 OK: consent requests details in response payload
  </text>
  <path stroke="#a80036" d="M2041.5 1874.406h42M2083.5 1874.406v13M2042.5 1887.406h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2052.5 1883.406l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2048.5" y="1861.774">
    SIM-15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="2101.5" y="1854.207">
    RENDER
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="2157.5" y="1854.207">
    ask the User to grant consent
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2382.5" y="1854.207">
    for
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="2403.5" y="1854.207">
    consentRequestId=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2019.5 1912.54l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1502.5 1916.539h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1509.5" y="1911.473">
    SIM-16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="1562.5" y="1911.473">
    SUBMIT:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1619.5" y="1911.473">
    consent granted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2639.5 2002.203l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2041.5 2006.203h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2048.5" y="1970.872">
    SIM-17
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="2101.5" y="1940.606">
    POST /authorize
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2109.5" y="1955.739">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="2125.5" y="1970.872">
    consentRequestId=456
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2285.5" y="1970.872">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2125.5" y="1986.004">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2109.5" y="2001.137">
    }
  </text>
  <path stroke="#a80036" d="M2651.5 2050.469h42M2693.5 2050.469v13M2652.5 2063.469h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2662.5 2059.469l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2658.5" y="2037.836">
    SIM-18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="2711.5" y="2030.27">
    generate a
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="2785.5" y="2030.27">
    secret=&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="2711.5" y="2045.403">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="2806.5" y="2045.403">
    TTK defined rule for username
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2052.5 2088.602l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2046.5 2092.602h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2058.5" y="2087.536">
    SIM-19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="2111.5" y="2087.536">
    201 OK: response: {
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="2244.5" y="2087.536">
    secret:&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2400.5" y="2087.536">
    &quot; }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1508.5 2117.734l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1502.5 2121.734h528"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1514.5" y="2116.669">
    SIM-20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="1567.5" y="2116.669">
    redirects to callbackUri=&quot;pisp-app://callback...?
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="1866.5" y="2116.669">
    secret=some-secret
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="2014.5" y="2116.669">
    &quot;
  </text>
</svg>
