<svg xmlns="http://www.w3.org/2000/svg" height="1538" preserveAspectRatio="none" style="width:1280px;height:1538px" width="1280">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="305" x="484" y="28.708">
    PISP Linking: Authentication (OTP)
  </text>
  <path fill="#DDD" stroke="#a80036" d="M501.5 40.953h73v1491.563h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="504.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M61 1447.086h10v29.133H61zM533 340.445h10v163.063h-10zM533 873.234h10v163.063h-10zM533 1267.758h10v208.461h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M1005 474.375h10v206.93h-10z"/>
  <path stroke="#a80036" d="M1005 474.375v206.93M1015 474.375v206.93M1005 474.375h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M1005 709.305h10v39.133h-10z"/>
  <path stroke="#a80036" d="M1005 709.305v39.133M1015 709.305v39.133"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M1005 776.438h10v708.781h-10z"/>
  <path stroke="#a80036" d="M1005 776.438v708.781M1015 776.438v708.781"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M1010 1007.164h10v289.727h-10z"/>
  <path stroke="#a80036" d="M66 95.383v53.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M66 148.516v28"/>
  <path stroke="#a80036" d="M66 176.516v39.132"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M66 215.648v28"/>
  <path stroke="#a80036" d="M66 243.648v437.657"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M66 681.305v28"/>
  <path stroke="#a80036" d="M66 709.305v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M66 748.438v28"/>
  <path stroke="#a80036" d="M66 776.438v717.781M537.5 95.383v53.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M537.5 148.516v28"/>
  <path stroke="#a80036" d="M537.5 176.516v39.132"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M537.5 215.648v28"/>
  <path stroke="#a80036" d="M537.5 243.648v437.657"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M537.5 681.305v28"/>
  <path stroke="#a80036" d="M537.5 709.305v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M537.5 748.438v28"/>
  <path stroke="#a80036" d="M537.5 776.438v717.781M1009.5 95.383v53.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1009.5 148.516v28"/>
  <path stroke="#a80036" d="M1009.5 176.516v39.132"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1009.5 215.648v28"/>
  <path stroke="#a80036" d="M1009.5 243.648v437.657"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1009.5 681.305v28"/>
  <path stroke="#a80036" d="M1009.5 709.305v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1009.5 748.438v28"/>
  <path stroke="#a80036" d="M1009.5 776.438v717.781"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M42 60.086h44v30.297H42z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="49" y="80.081">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M42 1493.219h44v30.297H42z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="49" y="1513.214">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M506.5 60.086h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="513.5" y="80.081">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M506.5 1493.219h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="513.5" y="1513.214">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M982.5 60.086h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="989.5" y="80.081">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M982.5 1493.219h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="989.5" y="1513.214">
    DFSP
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M61 1447.086h10v29.133H61zM533 340.445h10v163.063h-10zM533 873.234h10v163.063h-10zM533 1267.758h10v208.461h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M1005 474.375h10v206.93h-10z"/>
  <path stroke="#a80036" d="M1005 474.375v206.93M1015 474.375v206.93M1005 474.375h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M1005 709.305h10v39.133h-10z"/>
  <path stroke="#a80036" d="M1005 709.305v39.133M1015 709.305v39.133"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M1005 776.438h10v708.781h-10z"/>
  <path stroke="#a80036" d="M1005 776.438v708.781M1015 776.438v708.781"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M1010 1007.164h10v289.727h-10z"/>
  <path fill="#EEE" filter="url(#a)" stroke="#eee" d="M0 125.949h1273v3H0z"/>
  <path stroke="#000" d="M0 125.949h1273M0 128.949h1273"/>
  <path fill="#EEE" filter="url(#a)" stroke="#000" stroke-width="2" d="M578 115.383h117v23.133H578z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="584" y="131.45">
    Success case
  </text>
  <path d="M5 181.516v25h1062v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1057 181.516v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1041" x="11" y="198.583">
    Here the user provides the OTP sent directly to them by the DFSP into the PISP App. It&apos;s then used as the secret to prove to the DFSP that the user trusts the PISP.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M521 336.445l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M66 340.445h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="73" y="297.547">
    AUTH-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="130" y="259.715">
    PATCH /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="162" y="274.848">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="162" y="289.981">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="138" y="305.114">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="162" y="320.247">
    authToken: &quot;&lt;OTP&gt;&quot; // This is new !
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="146" y="335.379">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M77 365.578l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M71 369.578h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="83" y="364.512">
    AUTH-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="140" y="364.512">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M993 470.375l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M543 474.375h456"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="550" y="431.477">
    AUTH-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="607" y="393.645">
    PATCH /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="639" y="408.778">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="639" y="423.911">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="615" y="439.043">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="639" y="454.176">
    authToken: &quot;&lt;OTP&gt;&quot; // This is new !
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="623" y="469.309">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M549 499.508l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M543 503.508h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="555" y="498.442">
    AUTH-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="612" y="498.442">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M1015 547.773h42M1057 547.773v13M1016 560.773h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1026 556.773l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="1022" y="535.141">
    AUTH-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="1079" y="527.575">
    Verify the OTP is correct.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="1079" y="542.707">
    Move to Grant consent step
  </text>
  <path d="M32 573.773v55h1007v-45l-10-10H32" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1029 573.773v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="986" x="38" y="590.84">
    At this point, the DFSP believes that the User is their customer and that User trusts the PISP. This means that the DFSP can continue by granting consent.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="820" x="38" y="621.106">
    Note that the DFSP never &quot;responds&quot; to the Consent Request itself. Instead, it will create a Consent resource in the Grant phase.
  </text>
  <path fill="#EEE" filter="url(#a)" stroke="#eee" d="M0 658.738h1273v3H0z"/>
  <path stroke="#000" d="M0 658.738h1273M0 661.738h1273"/>
  <path fill="#EEE" filter="url(#a)" stroke="#000" stroke-width="2" d="M582.5 648.172h108v23.133h-108z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="588.5" y="664.239">
    Failure case
  </text>
  <path d="M42 714.305v25h990v-15l-10-10H42" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1022 714.305v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="407.75" y="731.372">
    Here the user enters an incorrect OTP.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M521 869.234l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M66 873.234h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="73" y="830.336">
    AUTH-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="130" y="792.504">
    PATCH /consentRequests/356
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="162" y="807.637">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="162" y="822.77">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="138" y="837.903">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="162" y="853.036">
    authToken: &quot;&lt;OTP&gt;&quot; // This is new !
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="146" y="868.168">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M77 898.367l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M71 902.367h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="83" y="897.301">
    AUTH-7
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="140" y="897.301">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M998 1003.164l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M543 1007.164h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="550" y="964.266">
    AUTH-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="607" y="926.434">
    PATCH /consentRequests/356
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="639" y="941.567">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="639" y="956.7">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="615" y="971.832">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="639" y="986.965">
    authToken: &quot;&lt;OTP&gt;&quot; // This is new !
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="623" y="1002.098">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M549 1032.297l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M543 1036.297h466"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="555" y="1031.231">
    AUTH-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="612" y="1031.231">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M1020 1065.43h42M1062 1065.43v13M1021 1078.43h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1031 1074.43l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1027" y="1060.364">
    AUTH-10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1093" y="1060.364">
    Verify the OTP is incorrect.
  </text>
  <path d="M42 1091.43v25h990v-15l-10-10H42" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1022 1091.43v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="526" x="267.75" y="1108.497">
    We respond with an error that the OTP is incorrect so the PISP can inform the user.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M554 1263.758l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M548 1267.758h461"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="560" y="1202.161">
    AUTH-11
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="626" y="1141.629">
    PUT /consentRequests/356/error
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="650" y="1156.762">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="650" y="1171.895">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="634" y="1187.028">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="650" y="1202.161">
    errorInformation : {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="666" y="1217.293">
    errorCode: &quot;7205&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="666" y="1232.426">
    errorDescription: &quot;OTP failed validation&quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="650" y="1247.559">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="634" y="1262.692">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M993 1292.89l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M543 1296.891h456"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="550" y="1291.825">
    AUTH-12
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="616" y="1291.825">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M82 1443.086l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M76 1447.086h456"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="88" y="1381.489">
    AUTH-13
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="154" y="1320.957">
    PUT /consentRequests/356/error
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="178" y="1336.09">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="178" y="1351.223">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="162" y="1366.356">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="178" y="1381.489">
    errorInformation : {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="194" y="1396.622">
    errorCode: &quot;7205&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="194" y="1411.754">
    errorDescription: &quot;OTP failed validation&quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="178" y="1426.887">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="162" y="1442.02">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M526 1472.219l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M66 1476.219h466"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="73" y="1471.153">
    AUTH-14
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="139" y="1471.153">
    200 OK
  </text>
</svg>
