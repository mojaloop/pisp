<svg xmlns="http://www.w3.org/2000/svg" height="4214" preserveAspectRatio="none" style="width:1935px;height:4214px" width="1935">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <path fill="#DDD" stroke="#a80036" d="M707 40.953h877v4167.742H707z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="1112" y="53.02">
    Mojaloop
  </text>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="439" x="746.25" y="28.708">
    PISP Linking: Credential registration (verification)
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M775.5 2192.789h858V3036.5h-858z"/>
  <path stroke="#a80036" d="M29 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 103.383v28"/>
  <path stroke="#a80036" d="M29 131.383v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 170.516v28"/>
  <path stroke="#a80036" d="M29 198.516v3968.882M797 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M797 103.383v28"/>
  <path stroke="#a80036" d="M797 131.383v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M797 170.516v28"/>
  <path stroke="#a80036" d="M797 198.516v3968.882"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M792 552.57h10v3614.828h-10z"/>
  <path stroke="#a80036" d="M985 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M985 103.383v28"/>
  <path stroke="#a80036" d="M985 131.383v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M985 170.516v28"/>
  <path stroke="#a80036" d="M985 198.516v3968.882M1528 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1528 103.383v28"/>
  <path stroke="#a80036" d="M1528 131.383v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1528 170.516v28"/>
  <path stroke="#a80036" d="M1528 198.516v3968.882M1617.5 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1617.5 103.383v28"/>
  <path stroke="#a80036" d="M1617.5 131.383v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1617.5 170.516v28"/>
  <path stroke="#a80036" d="M1617.5 198.516v3968.882"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M1612.5 943.758h10v3223.641h-10z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 60.086h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="80.081">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M711 60.086h168v30.297H711z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="718" y="80.081">
    Thirdparty-API-Adapter
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M893 60.086h180v30.297H893z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="900" y="80.081">
    Account Lookup Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1476 60.086h100v30.297h-100z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1483" y="80.081">
    Auth Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1590 60.086h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1597" y="80.081">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 4167.398h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="4187.394">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M711 4167.398h168v30.297H711z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="718" y="4187.394">
    Thirdparty-API-Adapter
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M893 4167.398h180v30.297H893z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="900" y="4187.394">
    Account Lookup Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1476 4167.398h100v30.297h-100z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1483" y="4187.394">
    Auth Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1590 4167.398h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1597" y="4187.394">
    DFSP
  </text>
  <path d="M8.25 136.383v25h1630v-15l-10-10H8.25" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1628.25 136.383v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1039" x="297.25" y="153.45">
    The PISP uses the FIDO registration flow to generate a new keypair and sign the challenge, relying on the user performing an &quot;unlock action&quot; on their mobile device.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M780 548.57l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M29 552.57h757"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="36" y="381.043">
    CRED-10
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="103" y="214.583">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="119" y="229.715">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="119" y="244.848">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="119" y="259.981">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="135" y="275.114">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="151" y="290.247">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="167" y="305.379">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="167" y="320.512">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="151" y="335.645">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="151" y="350.778">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="167" y="365.911">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="167" y="381.043">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="151" y="396.176">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="135" y="411.309">
    ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="135" y="426.442">
    credential: {// This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="151" y="441.575">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="151" y="456.707">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="151" y="471.84">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="376" x="151" y="486.973">
    signature: base64(...), // The signed challenge
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="151" y="502.106">
    payload: base64(...), // public key!
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="624" x="151" y="517.239">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="135" y="532.372">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="119" y="547.504">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 577.703l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 581.703h757"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="46" y="576.637">
    CRED-11
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="113" y="576.637">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 939.758l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M802 943.758h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="772.231">
    CRED-12
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="876" y="605.77">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="892" y="620.903">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="892" y="636.036">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="892" y="651.168">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="908" y="666.301">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="924" y="681.434">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="940" y="696.567">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="940" y="711.7">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="924" y="726.832">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="924" y="741.965">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="940" y="757.098">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="940" y="772.231">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="924" y="787.364">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="908" y="802.497">
    ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="908" y="817.629">
    credential: {// This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="924" y="832.762">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="924" y="847.895">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="924" y="863.028">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="376" x="924" y="878.161">
    signature: base64(...), // The signed challenge
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="924" y="893.293">
    payload: base64(...), // public key!
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="624" x="924" y="908.426">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="908" y="923.559">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="892" y="938.692">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 968.89l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M807 972.891h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="967.825">
    CRED-13
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="886" y="967.825">
    202 Accepted
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1313.5 985.891h608v129h-608z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="1317.5" y="1001.957">
    DFSP checks :
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="600" x="1317.5" y="1017.09">
    1. The challenge payload(s) were correctly derived from the scopes.accountId + scopes.action
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1317.5" y="1047.356">
    It then:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="1317.5" y="1062.489">
    2. Registers the Credential with the Auth Service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1629.5" y="1062.489">
    POST /credentials
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="1317.5" y="1077.622">
    3. If the `PUT /credentials/{id}` callback contains
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1634.5" y="1077.622">
    credential#status
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1774.5" y="1077.622">
    of
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="1790.5" y="1077.622">
    VERIFIED
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1854.5" y="1077.622">
    ,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="322" x="1333.5" y="1092.754">
    for each scope in the Consent, the DFSP creates a
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1659.5" y="1092.754">
    CredentialScope
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 1303.547l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M807 1307.547h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="1219.251">
    CRED-14
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="886" y="1136.02">
    POST /credentials
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="902" y="1151.153">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="902" y="1166.286">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="894" y="1181.418">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="902" y="1196.551">
    challenge: &quot;base64(...)&quot; //The challenge derived from scopes
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1382" y="1196.551">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="902" y="1211.684">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="902" y="1226.817">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="902" y="1241.95">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="376" x="902" y="1257.082">
    signature: base64(...), // The signed challenge
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="902" y="1272.215">
    payload: base64(...), // public key!
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="624" x="902" y="1287.348">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="886" y="1302.481">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 1332.68l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M802 1336.68h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="1331.614">
    CRED-15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="876" y="1331.614">
    &quot;202 Accepted&quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1516 1528.273l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M802 1532.273h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="1443.977">
    CRED-16
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="876" y="1360.747">
    POST /credentials
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="892" y="1375.879">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="892" y="1391.012">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="884" y="1406.145">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="892" y="1421.278">
    challenge: &quot;base64(...)&quot; //The challenge derived from scopes
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1372" y="1421.278">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="892" y="1436.411">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="892" y="1451.543">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="892" y="1466.676">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="376" x="892" y="1481.809">
    signature: base64(...), // The signed challenge
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="892" y="1496.942">
    payload: base64(...), // public key!
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="624" x="892" y="1512.075">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="876" y="1527.207">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 1557.406l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M807 1561.406h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="1556.34">
    CRED-17
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="886" y="1556.34">
    &quot;202 Accepted&quot;
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1329 1574.406h398v53h-398z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="390" x="1333" y="1590.473">
    The Auth Service checks the signature against the challenge,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="381" x="1333" y="1605.606">
    and if provided, the metadata field to prove the authenticity
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1333" y="1620.739">
    of the key.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 1816.398l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M807 1820.398h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="1732.102">
    CRED-18
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="886" y="1648.872">
    POST /credentials
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="902" y="1664.004">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="902" y="1679.137">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="894" y="1694.27">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="902" y="1709.403">
    challenge: &quot;base64(...)&quot; //The challenge derived from scopes
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1382" y="1709.403">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="902" y="1724.536">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="902" y="1739.668">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="902" y="1754.801">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="376" x="902" y="1769.934">
    signature: base64(...), // The signed challenge
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="902" y="1785.067">
    payload: base64(...), // public key!
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="624" x="902" y="1800.2">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="886" y="1815.332">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 1845.531l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M802 1849.531h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="1844.465">
    CRED-19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="876" y="1844.465">
    &quot;202 Accepted&quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 1950.328l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M807 1954.328h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="1911.43">
    CRED-20
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="886" y="1873.598">
    PUT /credentials/9876
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="902" y="1888.731">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="902" y="1903.864">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="894" y="1918.997">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="902" y="1934.129">
    status: &quot;VERIFIED&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="886" y="1949.262">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1516 1979.46l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M802 1983.461h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="1978.395">
    CRED-21
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="876" y="1978.395">
    &quot;200 OK&quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 2084.258l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M802 2088.258h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="2045.36">
    CRED-22
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="876" y="2007.528">
    PUT /credentials/9876
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="892" y="2022.661">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="892" y="2037.793">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="884" y="2052.926">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="892" y="2068.059">
    status: &quot;VERIFIED&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="876" y="2083.192">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 2113.39l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M807 2117.391h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="2112.325">
    CRED-23
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="886" y="2112.325">
    &quot;200 OK&quot;
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1367 2130.391h501v53h-501z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="452" x="1371" y="2146.457">
    DFSP is now satisfied that the credential registered by the PISP is valid,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="493" x="1371" y="2161.59">
    and now proceeds to register &quot;THIRD_PARTY_LINK&quot;s with the Auth Service and
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1371" y="2176.723">
    ALS
  </text>
  <path d="M775.5 2192.79h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M775.5 2192.789h858V3036.5h-858z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="790.5" y="2205.856">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="867.5" y="2204.999">
    [for each scope in
  </text>
  <text font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="987.5" y="2204.999">
    Consents.scopes
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1092.5" y="2204.999">
    ]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 2307.719l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M807 2311.719h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="2268.821">
    CRED-24
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="886" y="2230.989">
    POST /scopes/THIRD_PARTY_LINK/qwerty-56789
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="902" y="2246.122">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="902" y="2261.254">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="902" y="2276.387">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="918" y="2291.52">
    credentialId: &quot;9876
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1070" y="2291.52">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="902" y="2306.653">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 2336.852l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M802 2340.852h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="2335.786">
    CRED-25
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="876" y="2335.786">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1516 2441.648l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M802 2445.648h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="2402.751">
    CRED-26
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="876" y="2364.919">
    POST /scopes/THIRD_PARTY_LINK/qwerty-56789
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="892" y="2380.051">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="892" y="2395.184">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="892" y="2410.317">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="908" y="2425.45">
    credentialId: &quot;9876
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1060" y="2425.45">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="892" y="2440.582">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 2470.781l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M807 2474.781h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="2469.715">
    CRED-27
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="886" y="2469.715">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 2575.578l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M807 2579.578h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="2536.68">
    CRED-28
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="886" y="2498.848">
    PUT /scopes/THIRD_PARTY_LINK/qwerty-56789
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="902" y="2513.981">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="902" y="2529.114">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="902" y="2544.247">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="918" y="2559.379">
    credentialId: &quot;9876
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1070" y="2559.379">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="902" y="2574.512">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1516 2604.71l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M802 2608.711h720"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="2603.645">
    CRED-29
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="876" y="2603.645">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 2709.508l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M802 2713.508h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="809" y="2670.61">
    CRED-30
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="876" y="2632.778">
    PUT /scopes/THIRD_PARTY_LINK/qwerty-56789
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="892" y="2647.911">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="892" y="2663.044">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="892" y="2678.176">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="908" y="2693.309">
    credentialId: &quot;9876
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1060" y="2693.309">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="892" y="2708.442">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 2738.64l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M807 2742.641h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="2737.575">
    CRED-31
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="886" y="2737.575">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M996 2828.305l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M990 2832.305h621.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="1002" y="2796.973">
    CRED-32
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="384" x="1069" y="2766.707">
    POST /participants/THIRD_PARTY_LINK/qwerty-56789
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1085" y="2781.84">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1085" y="2796.973">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1101" y="2812.106">
    fspId: &quot;dfspa&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1085" y="2827.239">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 2857.438l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M985 2861.438h621.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="992" y="2856.372">
    CRED-33
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1059" y="2856.372">
    202 Accepted
  </text>
  <path fill="#696969" filter="url(#a)" stroke="#a80036" d="M796.5 2874.438h377v23h-377z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="800.5" y="2890.504">
    ALS registers a new entry in the THIRD_PARTY_LINK oracle
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1600.5 2995.367l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M985 2999.367h621.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="992" y="2956.469">
    CRED-34
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="1059" y="2918.637">
    PUT /participants/THIRD_PARTY_LINK/qwerty-56789
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1075" y="2933.77">
    FSIOP-Source: account-lookup-service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="1075" y="2948.903">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1075" y="2964.036">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1091" y="2979.169">
    fspId: &quot;dfspa&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1075" y="2994.301">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M996 3024.5l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M990 3028.5h621.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="1002" y="3023.434">
    CRED-35
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="1069" y="3023.434">
    200 OK
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1377 3050.5h481v38h-481z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="1381" y="3066.567">
    Now that the Credentials are verified and registered with the Auth Service,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="1381" y="3081.7">
    the DFSP can update the PISP with the final status
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 3564.883l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M807 3568.883h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="3336.825">
    CRED-36
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="886" y="3109.832">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="902" y="3124.965">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="902" y="3140.098">
    FSPIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="902" y="3155.231">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="918" y="3170.364">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="934" y="3185.497">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="950" y="3200.629">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="950" y="3215.762">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="950" y="3230.895">
    partyIdInfo: { //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="966" y="3246.028">
    partyIdType: &quot;THIRD_PARTY_LINK&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="966" y="3261.161">
    partyIdentifier: &quot;qwerty-1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="950" y="3276.294">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="934" y="3291.426">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="934" y="3306.559">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="950" y="3321.692">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="950" y="3336.825">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="950" y="3351.957">
    partyIdInfo: { //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="966" y="3367.09">
    partyIdType: &quot;THIRD_PARTY_LINK&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="966" y="3382.223">
    partyIdentifier: &quot;qwerty-5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="950" y="3397.356">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="934" y="3412.489">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="918" y="3427.622">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="918" y="3442.754">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="934" y="3457.887">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="934" y="3473.02">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="934" y="3488.153">
    status: &quot;VERIFIED&quot;, //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="934" y="3503.286">
    signature: base64(...),
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="934" y="3518.419">
    payload: base64(...),
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="624" x="934" y="3533.551">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="918" y="3548.684">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="902" y="3563.817">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M813 3594.016l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M807 3598.016h804.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="819" y="3592.95">
    CRED-37
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="886" y="3592.95">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 4077.133l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M34 4081.133h757"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="46" y="3849.075">
    CRED-38
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="113" y="3622.082">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="129" y="3637.215">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="129" y="3652.348">
    FSPIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129" y="3667.481">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="145" y="3682.614">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="161" y="3697.747">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="177" y="3712.879">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="177" y="3728.012">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="177" y="3743.145">
    partyIdInfo: { //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="193" y="3758.278">
    partyIdType: &quot;THIRD_PARTY_LINK&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="193" y="3773.411">
    partyIdentifier: &quot;qwerty-1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="177" y="3788.544">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="161" y="3803.676">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="161" y="3818.809">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="177" y="3833.942">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="177" y="3849.075">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="177" y="3864.207">
    partyIdInfo: { //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="193" y="3879.34">
    partyIdType: &quot;THIRD_PARTY_LINK&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="193" y="3894.473">
    partyIdentifier: &quot;qwerty-5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="177" y="3909.606">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="161" y="3924.739">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="145" y="3939.872">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="145" y="3955.004">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="161" y="3970.137">
    credentialId: &quot;9876&quot;, //keyHandleId in FIDO speak
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="161" y="3985.27">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="161" y="4000.403">
    status: &quot;VERIFIED&quot;, //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="161" y="4015.536">
    signature: base64(...),
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="161" y="4030.669">
    payload: base64(...),
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="624" x="161" y="4045.801">
    metadata: ... //TODO - metadata that the DFSP can use to verify this signature
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="145" y="4060.934">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129" y="4076.067">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M780 4106.266l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M29 4110.266h757"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="36" y="4105.2">
    CRED-39
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="103" y="4105.2">
    200 OK
  </text>
  <path d="M8.25 4123.266v25h1630v-15l-10-10H8.25" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1628.25 4123.266v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="934" x="349.75" y="4140.333">
    Now we have a new identifier that the PISP can use to initiate transactions, a registered credential, and that credential is stored in the auth-service
  </text>
</svg>
